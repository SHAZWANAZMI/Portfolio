<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* === 1. CSS ASAL ANDA (TEMA HIJAU) === */
        :root {
            --sidebar-width: 300px;
            --main-green: #0ce029; /* Warna hijau asal */
            --secondary-light: #e7dce7;
            --highlight-pink: #F67280;
            --accent-pink: #F8B195;
            --link-color: #ffffff;
            --active-color: #00FFFF;
            --link-bg: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Arial', sans-serif;
            line-height: 1.6;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        body {
            background-image: url("background_contact.jpeg");
            background-size: cover;
            background-attachment: fixed;
            color: #333;
            overflow-x: hidden;
            padding-top: 0;
        }
        
        /* FIX MOBILE: Kunci scroll body apabila menu terbuka */
        body.menu-open {
            overflow: hidden;
        }


        /* === 2. TAMBAHAN: CSS UNTUK PRELOADER (BLOOMING) === */
        #loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-out, visibility 1s ease-out;
        }
        .loader-hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        /* Container */
        .container {
            max-width: 1100px;
            margin: 2rem auto;
            padding: 1.5rem 1.5rem 2.5rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        /* Header & Nav */
        header {
            position: fixed;
            top: 0;
            right: 0;
            /* Tukar left: 0 kepada auto, biarkan ia ikut kanan */
            left: auto; 
            z-index: 1001;
            padding: 1rem;
            height: auto;
            background: transparent;
        }

        .nav-wrapper {
            display: flex;
            justify-content: flex-end;
            padding-right: 0;
            height: 100%;
            align-items: center;
        }

        .nav-toggle-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--main-green);
            color: white;
            border: 1px solid var(--main-green);
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(12, 224, 41, 0.6);
            transition: all 0.3s ease;
        }

        .nav-toggle-btn:hover {
            background: #09b320;
            box-shadow: 0 4px 20px rgba(12, 224, 41, 0.8);
            transform: scale(1.05);
        }
        
        .container header nav { display: none; }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .sidebar-menu {
            position: fixed;
            top: 0;
            right: 0;
            width: var(--sidebar-width);
            height: 100%;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.95);
            /* Sembunyi ke kanan */
            transform: translateX(var(--sidebar-width));
            transition: transform 0.3s ease;
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            box-shadow: -10px 0 20px rgba(0, 0, 0, 0.8);
        }

        .sidebar-menu.open { 
            transform: translateX(0); 
        }

        .close-btn {
            align-self: flex-start;
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--main-green);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 2rem;
            transition: background 0.2s ease;
        }

        .close-btn:hover { background: #09b320; }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            overflow-y: auto;
        }

        .group-title {
            color: #ccc;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .nav-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar-link { text-decoration: none; }

        .pill-box {
            color: var(--link-color);
            background: var(--link-bg);
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .pill-box:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--active-color);
            box-shadow: 0 0 10px var(--active-color);
            transform: translateX(5px);
        }

        .sidebar-link.active-link .pill-box {
            color: var(--active-color);
            background: rgba(0, 255, 255, 0.15);
            border: 1px solid var(--active-color);
            box-shadow: 0 0 8px var(--active-color);
        }

        /* Header Content */
        .header {
            padding: 2rem 1rem;
            background: linear-gradient(130deg, var(--main-green), var(--secondary-light));
            text-align: center;
            margin-bottom: 2rem;
            color: white;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            color: white;
        }

        .header p {
            font-size: 1.2rem;
            color: #333;
            font-weight: 500;
        }

        /* Contact Section */
        .contact-section {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            justify-content: center;
        }

        .contact-item {
            flex: 1 1 calc(30% - 1rem);
            max-width: 350px;
            background: #f9f9f9;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .contact-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .contact-item img {
            width: 100%;
            max-width: 100px;
            height: auto;
            margin-bottom: 1rem;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .contact-item h3 {
            font-size: 1.5rem;
            color: var(--highlight-pink);
            margin-bottom: 0.5rem;
        }

        .contact-item h3 a {
            text-decoration: none;
            color: inherit;
            font-size: 1.5rem;
        }

        .contact-item h3 a:hover {
            text-decoration: underline;
        }

        .contact-item p {
            font-size: 1rem;
            color: #555;
            font-weight: 500;
        }

        /* === KOD BARU: MESSAGE LOG BERTEKSTUR (Pilihan 3) === */
        #message-log-container {
            /* Latar belakang putih asas */
            background-color: #ffffff; 
            
            /* Mencipta corak garisan halus (diagonal stripes) */
            background-image: repeating-linear-gradient(
                45deg, 
                #f5f5f5, 
                #f5f5f5 10px, 
                #ffffff 10px, 
                #ffffff 20px
            );
            
            /* Sempadan yang lebih tebal dan menarik */
            border: 3px dashed var(--highlight-pink); /* Menggunakan warna pink */
            border-radius: 15px; /* Sempadan lebih bulat */
            padding: 15px; /* Padding yang lebih luas */
            min-height: 120px; 
            text-align: left;
            color: #333;
            font-size: 0.95rem;
            word-wrap: break-word;
            overflow-y: auto;
            max-height: 200px;
            
            /* Bayangan lembut untuk kesan pop-out */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); 
            transition: all 0.3s ease;
        }

        #message-log-container:hover {
            /* Sedikit kesan naik apabila di-hover */
            transform: translateY(-2px); 
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); 
        }

        /* Mengubah gaya teks di dalam log untuk lebih jelas dengan latar corak */
        #message-log-container div {
            /* Pastikan setiap mesej mempunyai latar belakang padu untuk keterbacaan */
            background-color: rgba(255, 255, 255, 0.8); 
            padding: 5px 8px;
            border-radius: 5px;
            margin-bottom: 5px;
            border-left: 5px solid var(--main-green); /* Garisan penunjuk Hijau */
        }
        /* AKHIR KOD BARU MESSAGE LOG */


        /* === 3. TAMBAHAN: CSS UNTUK MUSIC PLAYER === */

        .music-floating-container {
            position: fixed;
            bottom: 25px;
            right: 25px;
            z-index: 1000;
        }
        .spotify-icon-toggle {
            display: block;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            border-radius: 50%;
            transition: transform 0.3s ease;
            position: relative;
            z-index: 1002;
        }
        .spotify-icon-toggle:hover { transform: scale(1.1); }
        .spotify-icon {
            font-size: 3em;
            color: #1DB954;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            background-color: white;
            display: block;
        }
        .mini-player-popup {
            width: 350px;
            height: 380px;
            background-color: transparent;
            position: fixed;
            bottom: 25px;
            right: 25px;
            opacity: 0;
            visibility: hidden;
            cursor: move;
            z-index: 1001;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .mini-player-popup.active { opacity: 1; visibility: visible; }
        .mini-player-popup iframe { border-radius: 12px; pointer-events: auto; }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(130deg, var(--main-green), var(--secondary-light));
            color: #333;
            border-radius: 15px;
            font-size: 0.9rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        footer a {
            color: var(--highlight-pink);
            text-decoration: underline;
            font-weight: 700;
        }

        footer a:hover { color: #fff; }

        /* Media Query for Mobile */
        @media (max-width: 768px) {
            
            /* FIX MOBILE: Sidebar tutup penuh */
            .sidebar-menu { 
                width: 100%; 
                left: 0; 
                right: auto;
                /* Sembunyikan sepenuhnya di luar skrin 100% dari kiri */
                transform: translateX(100%); 
            }
            
            .sidebar-menu.open { 
                /* Buka penuh ke 0 */
                transform: translateX(0); 
            }

            .container { margin-top: 1rem; }
            .nav-wrapper { padding-right: 0; }
            .contact-item { flex: 1 1 calc(50% - 1rem); max-width: unset; padding: 1rem; }
            .contact-section { gap: 1rem; }
            .mini-player-popup { width: 280px; height: 250px; }
        }
        @media (max-width: 480px) {
            .contact-item { flex: 1 1 100%; }
        }
    </style>
</head>

<body>

    <div id="loader-overlay"></div>

    <header>
        <div class="nav-wrapper">
            <button id="nav-toggle" class="nav-link nav-toggle-btn"
                aria-controls="sidebar-menu"
                aria-expanded="false"
                aria-label="Toggle Navigation Menu">
                <i class="fas fa-bars"></i> Menu
            </button>
        </div>
    </header>
    
    <div id="menu-overlay" class="menu-overlay"></div>

    <div id="sidebar-menu" class="sidebar-menu" role="dialog" aria-modal="true">
        <button id="close-menu" class="close-btn" aria-label="Close Navigation Menu">
            <i class="fas fa-times"></i> Close
        </button>

        <nav class="sidebar-nav">
            <div class="nav-group">
                <a href="index.html" class="sidebar-link">
                    <div class="pill-box">Home</div>
                </a>
                <a href="Experience.html" class="sidebar-link">
                    <div class="pill-box">Experience</div>
                </a>
                <a href="Hobby.html" class="sidebar-link">
                    <div class="pill-box">Hobby</div>
                </a>
                <a href="Education.html" class="sidebar-link">
                    <div class="pill-box">Education</div>
                </a>
                <a href="Skills.html" class="sidebar-link">
                    <div class="pill-box">Skills</div>
                </a>
            </div>

            <h4 class="group-title">Other Pages</h4>
            <div class="nav-group">
                <a href="Gallery.html" class="sidebar-link">
                    <div class="pill-box">Gallery</div>
                </a>
                <a href="Get in Touch.html" class="sidebar-link active-link">
                    <div class="pill-box">Get in Touch</div>
                </a>
            </div>
        </nav>
    </div>

    <div class="container" id="main-content">
        <div class="header">
            <h1>Contact ðŸ’¡</h1>
            <p>Letâ€™s get in touch! Reach out through the details below</p>
        </div>
        <div class="contact-section">
            
            <div class="contact-item">
                <img src="whatsapp.png" alt="WhatsApp Now">
                <h3><a href="https://wa.me/60168268004?text=Hi%20Shazwan." target="_blank">WhatsApp Now</a></h3>
                <p>016-8268004</p>
            </div>

            <div class="contact-item">
                <i class="fas fa-clipboard-list" style="font-size: 3rem; color: var(--highlight-pink); margin-bottom: 0.5rem;"></i>
                <h3>Feel Free To Ask</h3>
                
                <textarea id="user-input-message" placeholder="Type your new message here... (max 100 chars)" maxlength="100" style="width: 100%; height: 80px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 10px; resize: none;"></textarea>
                
                <div style="display: flex; justify-content: space-between; gap: 10px; margin-bottom: 15px;">
                    <button id="add-message-btn" style="flex-grow: 1; padding: 8px 15px; background: var(--main-green); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; transition: background 0.3s ease;">
                        Add Message to Log
                    </button>
                    <button id="clear-log-btn" style="flex-grow: 1; padding: 8px 15px; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; transition: background 0.3s ease;">
                        Clear Log
                    </button>
                </div>
                
                <p style="font-weight: bold; margin-bottom: 5px; color: #333;">History:</p>
                <div id="message-log-container">
                    No messages saved yet.
                </div>
            </div>

            <div class="contact-item">
                <img src="https://sf-static.tiktokcdn.com/obj/eden-sg/uhtyvueh7nulogpoguhm/tiktok-icon2.png" alt="Tiktok Icon">
                <h3><a href="https://tiktok.com/@wann__._" target="_blank">Tiktok</a></h3>
                <p>@wann__._</p>
            </div>

            <div class="contact-item">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTMgfKNwFj7O66Qn-tIw87Yzo1A3DNh9rGq5g&s" alt="Instagram Icon">
                <h3><a href="https://www.instagram.com/wanazmi.__?igsh=czIzYnh0YnZjMnQx" target="_blank">Instagram</a></h3>
                <p>wanazmi.__</p>
            </div>

            <div class="contact-item">
                <img src="github.png" alt="GitHub Icon">
                <h3><a href="https://github.com/SHAZWANAZMI" target="_blank">GitHub</a></h3>
                <p>SHAZWAN_AZMI</p>
            </div>

            <div class="contact-item">
                <img src="linkedin.png" alt="Linked in Icon">
                <h3><a href="https://www.linkedin.com/in/-shazwan-azmi-b90581361/" target="_blank">LinkedIn</a></h3>
                <p>Shazwan Azmi</p>
            </div>
        </div>
        <footer>
            <p>Â© 2025 Wan. All rights reserved.</p>
        </footer>
    </div>

    <div class="music-floating-container">
        <a href="#" class="spotify-icon-toggle" id="musicToggleBtn" title="Play Spotify Playlist">
            <i class="fab fa-spotify spotify-icon"></i>
        </a>

        <div class="mini-player-popup" id="miniPlayer">
            <iframe
                id="spotifyPlayer"
                width="100%"
                height="100%"
                style="border-radius:12px"
                /* GANTIKAN DENGAN URL EMBED SPOTIFY SEBENAR ANDA */
                src="https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M?utm_source=generator"
                frameBorder="0"
                allowfullscreen=""
                allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
                loading="lazy">
            </iframe>
        </div>
    </div>

    <script>
        // --- A. SCRIPT PRELOADER (BLOOMING) ---
        "use strict";
        const loaderContainer = document.getElementById("loader-overlay");
        const TP=2*Math.PI;
        const CSIZE= 550;

        const ctx=(()=>{
            let d=document.createElement("div");
            d.style.textAlign="center";
            loaderContainer.append(d);
            let c=document.createElement("canvas");
            c.width=2*CSIZE;
            c.height=2*CSIZE;
            d.append(c);
            return c.getContext("2d");
        })();
        ctx.translate(CSIZE,CSIZE);

        const handleResize=()=>{
            let D=Math.min(window.innerWidth,window.innerHeight)-40;
            ctx.canvas.style.width=ctx.canvas.style.height=D+"px";
        }
        window.addEventListener('resize', handleResize);

        const getRandomInt=(min,max,low)=>{
            if (low) return Math.floor(Math.random()*Math.random()*(max-min))+min;
            return Math.floor(Math.random()*(max-min))+min;
        }

        var colors=[];
        var setColors=()=>{
            colors=[];
            let colorCount=2;
            let h=getRandomInt(180,300);
            for (let i=0; i<colorCount; i++) {
                let hd=Math.round(90/colorCount)*i+getRandomInt(-10,10);
                let hue=(h+hd)%360;
                colors.push("hsl("+hue+",98%,60%)");
            }
        }
        setColors();

        var stopped=false;
        var t=0; var S=2; var s=0;
        var dur=600; var dim=60; var R=70;
        
        function animate(ts) {
            if (stopped) return;
            t++;
            if (t<dur) draw();
            if (t==dur && ++s<S) { reset(); t=0; }
            if (t>dur+200) { ctx.canvas.style.opacity=1-(t-dur-200)/60; }
            if (t>dur+200+60) {
                reset(); t=0; s=0; S=getRandomInt(1,5);
                ctx.setTransform(1,0,0,1,0,0);
                ctx.clearRect(0,0,2*CSIZE,2*CSIZE);
                ctx.canvas.style.opacity=1;
            }
            requestAnimationFrame(animate);
        }

        handleResize();

        var F1=4*Math.random(), F2=4*Math.random(), F3=4*Math.random(), F4=4*Math.random();
        var P1=1-2*Math.random(), P2=(1-Math.abs(P1))*[-1,1][getRandomInt(0,2)];
        var P3=1-2*Math.random(), P4=(1-Math.abs(P3))*[-1,1][getRandomInt(0,2)];
        var dash1=[], dash2=[];
        
        var reset=()=>{
            F1=4*Math.random(); F2=4*Math.random(); F3=4*Math.random(); F4=4*Math.random();
            P3=1-2*Math.random(); P4=(1-Math.abs(P3))*[-1,1][getRandomInt(0,2)];
            K1=10-20*Math.random(); K2=10-20*Math.random();
            if (Math.random()<0.4) dash1=([dim*Math.random(),dim*Math.random()]); else dash1=[];
            if (Math.random()<0.4) dash2=([dim*Math.random(),dim*Math.random()]); else dash2=[];
            setColors();
        }

        const dm1=new DOMMatrix([-1,0,0,1,0,0]);
        const dm2=new DOMMatrix([1,0,0,-1,0,0]);
        const dm3=new DOMMatrix([0,1,-1,0,0,0]);

        ctx.fillStyle="#00000008";
        var K1=getRandomInt(1,10); var K2=getRandomInt(1,10);
        ctx.lineWidth=10;
        
        var draw=()=>{
            let z=TP/4*t/dur;
            let x=340*(P1*Math.cos(F1*z)+P2*Math.cos(F2*z));
            let y=340*(P3*Math.sin(F3*z)+P4*Math.sin(F4*z));
            let s=Math.pow(Math.sin(TP/2*t/dur),2);
            ctx.setTransform(s,0,0,s,CSIZE,CSIZE);
            let pd=new Path2D(); pd.arc(x,y,R,0,TP);
            pd.addPath(pd,dm1); pd.addPath(pd,dm2); pd.addPath(pd,dm3);
            ctx.fill(pd);
            let dx=dim*Math.cos(K1*z); let dy=dim*Math.sin(K1*z);
            let p0=new Path2D(); p0.moveTo(x-dx,y-dy); p0.lineTo(x+dx,y+dy);
            p0.addPath(p0,dm1); p0.addPath(p0,dm2); p0.addPath(p0,dm3);
            ctx.strokeStyle=colors[0]; ctx.setLineDash(dash1); ctx.stroke(p0);
            dx=dim*Math.cos(-K2*z); dy=dim*Math.sin(-K2*z);
            let p1=new Path2D(); p1.moveTo(x-dx,y-dy); p1.lineTo(x+dx,y+dy);
            p1.addPath(p1,dm1); p1.addPath(p1,dm2); p1.addPath(p1,dm3);
            ctx.strokeStyle=colors[1]; ctx.setLineDash(dash2); ctx.stroke(p1);
        }
        requestAnimationFrame(animate);


        document.addEventListener('DOMContentLoaded', () => {

            // --- B. SIDEBAR LOGIC (UPDATED FOR MOBILE FIX) ---
            const toggleButton = document.getElementById('nav-toggle');
            const closeButton = document.getElementById('close-menu');
            const sidebarMenu = document.getElementById('sidebar-menu');
            const menuOverlay = document.getElementById('menu-overlay');
            const bodyElement = document.body; // Ambil elemen body

            const toggleMenu = (focusBack = false) => {
                const isOpen = sidebarMenu.classList.toggle('open');
                menuOverlay.classList.toggle('active');
                toggleButton.setAttribute('aria-expanded', isOpen);

                if (isOpen) {
                    bodyElement.classList.add('menu-open'); // FIX: Kunci scroll body
                    closeButton.focus();
                    toggleButton.style.display = 'none';
                    closeButton.style.display = 'flex';
                } else {
                    bodyElement.classList.remove('menu-open'); // FIX: Lepaskan scroll body
                    if (focusBack) toggleButton.focus();
                    toggleButton.style.display = 'flex';
                    closeButton.style.display = 'none';
                }
            };

            if (toggleButton && sidebarMenu && closeButton && menuOverlay) {
                toggleButton.addEventListener('click', () => toggleMenu(true));
                closeButton.addEventListener('click', () => toggleMenu(true));
                menuOverlay.addEventListener('click', () => toggleMenu(true));
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && sidebarMenu.classList.contains('open')) {
                        toggleMenu(true);
                    }
                });
                closeButton.style.display = 'none';
                document.querySelectorAll('.sidebar-link').forEach(link => {
                    link.addEventListener('click', () => {
                        if (sidebarMenu.classList.contains('open')) {
                            setTimeout(() => toggleMenu(false), 100);
                        }
                    });
                });
            }
            
            // --- C. MESSAGE LOG LOGIC ---
            const messageInput = document.getElementById('user-input-message');
            const messageLogContainer = document.getElementById('message-log-container');
            const addMessageButton = document.getElementById('add-message-btn');
            const clearLogButton = document.getElementById('clear-log-btn');
            const STORAGE_KEY = 'shazwan_message_log';
            
            const loadMessages = () => {
                const savedData = localStorage.getItem(STORAGE_KEY);
                try { return savedData ? JSON.parse(savedData) : []; } catch (e) { return []; }
            };

            const renderMessages = (messages) => {
                if (messages.length === 0) {
                    // Jika tiada mesej, tetapkan gaya pusat (center)
                    messageLogContainer.innerHTML = 'No messages saved yet.';
                    messageLogContainer.style.textAlign = 'center';
                    messageLogContainer.style.paddingTop = '20px';
                    return;
                }
                
                // Jika ada mesej, tetapkan gaya rata kiri (left) dan padding standard
                messageLogContainer.style.textAlign = 'left';
                messageLogContainer.style.paddingTop = '15px';

                messageLogContainer.innerHTML = messages.map((entry, index) => {
                    // Gunakan DIV untuk setiap mesej untuk apply style bergaris (border-left)
                    return `<div>
                        <span style="color: #666; font-size: 0.8rem;">#${index + 1} (${entry.timestamp})</span><br>
                        ${entry.text}
                    </div>`;
                }).join('');

                messageLogContainer.scrollTop = messageLogContainer.scrollHeight;
            };

            const addMessage = () => {
                const newMessageText = messageInput.value.trim();
                if (newMessageText === '') {
                    alert('Please type a message before saving.');
                    return;
                }
                let messages = loadMessages();
                const timestamp = new Date().toLocaleTimeString('en-MY', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                messages.push({ text: newMessageText, timestamp: timestamp });
                localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));
                renderMessages(messages);
                messageInput.value = '';
                messageInput.focus();
                alert('Message added to log!');
            };

            const clearMessageLog = () => {
                if (confirm('Are you sure you want to clear ALL messages?')) {
                    localStorage.removeItem(STORAGE_KEY);
                    renderMessages([]);
                    alert('Message log cleared.');
                }
            };
            
            renderMessages(loadMessages());
            addMessageButton.addEventListener('click', addMessage);
            clearLogButton.addEventListener('click', clearMessageLog);
            messageInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    addMessage();
                }
            });

            // --- D. MUSIC PLAYER LOGIC ---
            const musicToggleBtn = document.getElementById('musicToggleBtn');
            const miniPlayer = document.getElementById('miniPlayer');
            let isDragging = false;
            let offset = { x: 0, y: 0 };
            
            miniPlayer.style.position = 'fixed'; 

            function startDrag(e) {
                if (e.target.id === 'spotifyPlayer') return;
                e.preventDefault();
                isDragging = true;
                offset.x = e.clientX - miniPlayer.offsetLeft;
                offset.y = e.clientY - miniPlayer.offsetTop;
                document.addEventListener('mousemove', onDrag);
                document.addEventListener('mouseup', stopDrag);
                miniPlayer.style.cursor = 'grabbing';
            }
            function onDrag(e) {
                if (!isDragging) return;
                let newX = e.clientX - offset.x;
                let newY = e.clientY - offset.y;
                
                // Constraint check
                newX = Math.min(Math.max(newX, 0), window.innerWidth - miniPlayer.offsetWidth);
                newY = Math.min(Math.max(newY, 0), window.innerHeight - miniPlayer.offsetHeight);
                
                miniPlayer.style.left = newX + 'px';
                miniPlayer.style.top = newY + 'px';
                miniPlayer.style.right = 'auto';
                miniPlayer.style.bottom = 'auto';
            }
            function stopDrag() {
                isDragging = false;
                document.removeEventListener('mousemove', onDrag);
                document.removeEventListener('mouseup', stopDrag);
                miniPlayer.style.cursor = 'move';
            }
            miniPlayer.addEventListener('mousedown', startDrag);
            
            function togglePlayer(e) {
                e.preventDefault();
                const isCurrentlyActive = miniPlayer.classList.toggle('active');

                if (isCurrentlyActive) {
                    // Set posisi awal jika belum ditetapkan
                    if (!miniPlayer.dataset.positioned) {
                        const rect = miniPlayer.getBoundingClientRect();
                    
                        miniPlayer.style.left = rect.left + 'px';
                        miniPlayer.style.top = rect.top + 'px';
                        miniPlayer.style.right = 'auto'; 
                        miniPlayer.style.bottom = 'auto';

                        miniPlayer.dataset.positioned = 'true';
                    }
                }
            }
            musicToggleBtn.addEventListener('click', togglePlayer);

            // --- E. REMOVE LOADER ---
            setTimeout(function() {
                const loader = document.getElementById("loader-overlay");
                loader.classList.add("loader-hidden");
                loader.addEventListener("transitionend", function() {
                    stopped = true;
                });
            }, 2500);
        });
    </script>
</body>

</html>